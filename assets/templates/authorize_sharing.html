<!DOCTYPE html>
<html lang="{{.Locale}}">
  <head>
    <meta charset="utf-8">
    <title>{{.Title}}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{asset .Domain "/styles/stack.css" .ContextName}}">
    {{.CozyUI}}
    {{.ThemeCSS}}
    {{.Favicon}}
  </head>
  <body>
    <main role="application">
      <section class="popup">
        <header class="u-ta-center">
          {{if .HasShortcut}}
          <img class="u-w-3" src="{{asset .Domain "/images/icons-32-cloud-sync.svg"}}" alt="" />
          {{else}}
          <img class="u-w-3" src="{{asset .Domain "/images/icons-32-cloud-import.svg"}}" alt="" />
          {{end}}
        </header>
        <div class="container">
          <form method="POST" action="/auth/authorize/sharing" class="login auth">
            <input type="hidden" name="csrf_token" value="{{.CSRF}}" />
            <input type="hidden" name="sharing_id" value="{{.Sharing.SID}}" />
            <input type="hidden" name="state" value="{{.State}}" />
            <div role="region">
              <h1 class="u-mt-0">
                {{if .HasShortcut}}
                {{t "Authorize Sharing Title Synchronize"}}
                {{else}}
                {{t "Authorize Sharing Title Add"}}
                {{end}}
              </h1>
              <p class="help">
                {{- t "Authorize Sharing Request" .SharerName -}}
              </p>
              <ul class="perm-list">
                {{range $index, $rule := .Sharing.Rules}}
                <li class="{{ $rule.DocType }}">
                  {{- $rule.Title -}}
                </li>
                {{end}}
              </ul>
              <p>
                {{t "Authorize Sharing Permission start"}}
                <strong>
                  {{- if .Sharing.ReadOnly}}
                    {{t "Authorize Sharing Permission readonly"}}
                  {{else}}
                    {{t "Authorize Sharing Permission readwrite"}}
                  {{end -}}
                </strong>
                {{t "Authorize Sharing Permission end"}}
              </p>
              {{if .HasShortcut}}
              <input type="hidden" name="synchronize" value="true" />
              {{else}}
              <label class="c-input-checkbox u-mb-1">
                <input type="checkbox" name="synchronize" checked="checked" />
                <span><strong>{{t "Authorize Sharing Synchronize label"}}</strong></span>
              </label>
              {{end}}
            </div>
            <footer>
              <div class="controls u-flex u-flex-wrap-reverse">
                <a href="/auth/authorize/sharing/{{.Sharing.SID}}/cancel?state={{.State}}" type="cancel" class="u-flex-shrink-1 u-flex-grow-1 c-btn c-btn--secondary"><span><span>{{t "Authorize Sharing Cancel"}}</span></span></a>
                <button type="submit" class="u-flex-shrink-1 u-flex-grow-1 c-btn"><span><span>{{- t "Authorize Submit Sharing" -}}</span></span></button>
              </div>
            </footer>
          </form>
        </div>
      </section>
    </main>
  </body>
</html>
